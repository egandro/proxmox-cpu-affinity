{
    "global_config": {
        "env": {
            "SCRIPT_DIR": "/benchmark/scripts",
            "TEMPLATE_ID_EMPTY": 1001,
            "TEMPLATE_ID_DEBIAN": 1002,
            "PVE_VM_SSH_KEY_FILE_PUB": "/root/.ssh/id_rsa.pub",
            "PVE_VM_SSH_KEY_FILE": "/root/.ssh/id_rsa",
            "PVE_STORAGE": "local-zfs",
            "PVE_STORAGE_SNIPPETS": "local",
            "PVE_STORAGE_SNIPPETS_PATH": "/var/lib/vz/snippets",
            "TESTCASE_SSH_USER": "debian",
            "BENCHMARK_TEMPLATE_ID": "$TEMPLATE_ID_DEBIAN",
            "BENCHMARK_START_VMID": 200,
            "BENCHMARK_NUM_VMS": 2,
            "BENCHMARK_CORES": 2,
            "BENCHMARK_MEMORY": 1024,
            "WAIT_FOR_AGENT_MAX_LOOP": 100,
            "WAIT_FOR_AGENT_SLEEP_SECONDS": 10
        }
    },
    "create_templates": {
        "scripts": {
            "empty": {
                "cmd": "$SCRIPT_DIR/template-empty.sh $TEMPLATE_BUILD_FLAGS"
            },
            "debian": {
                "cmd": "$SCRIPT_DIR/template-debian.sh $TEMPLATE_BUILD_FLAGS",
                "env": {
                    "DEBIAN_USER": "$TESTCASE_SSH_USER"
                }
            }
        },
        "env": {
            "TEMPLATE_BUILD_FLAGS": "--overwrite --force"
        }
    },
    "testcases": [
        {
            "name": "kernel",
            "enable": false,
            "env": {
                "SLEEP_TIME": "100"
            },
            "scripts": {
                "vms-destroy": {
                    "cmd": "$SCRIPT_DIR/vms-destroy.sh"
                },
                "vms-create": {
                    "cmd": "$SCRIPT_DIR/vms-create.sh $SCRIPT_DIR/install-hookscript.sh"
                },
                "vms-start": {
                    "cmd": "$SCRIPT_DIR/vms-start.sh"
                },
                "vms-wait-for-agent": {
                    "cmd": "$SCRIPT_DIR/vms-wait-for-agent.sh"
                },
                "testcase-deploy": {
                    "cmd": "$SCRIPT_DIR/testcase-deploy.sh $TESTCASE install"
                },
                "testcase-init": {
                    "cmd": "$SCRIPT_DIR/testcase-run.sh $TESTCASE init.sh"
                },
                "testcase-run-nohup": {
                    "cmd": "$SCRIPT_DIR/testcase-run.sh $TESTCASE run.sh --nohup"
                },
                "wait": {
                    "cmd": "sleep $SLEEP_TIME"
                },
                "testcase-results": {
                    "cmd": "$SCRIPT_DIR/testcase-results.sh $TESTCASE"
                },
                "cleanup": {
                    "cmd": "echo $SCRIPT_DIR/vms-destroy.sh"
                }
            }
        },
        {
            "name": "redis",
            "env": {
                "SLEEP_TIME": "1000"
            },
            "scripts": {
                "vms-destroy": {
                    "cmd": "$SCRIPT_DIR/vms-destroy.sh"
                },
                "vms-create": {
                    "cmd": "$SCRIPT_DIR/vms-create.sh $SCRIPT_DIR/install-hookscript.sh"
                },
                "vms-start": {
                    "cmd": "$SCRIPT_DIR/vms-start.sh"
                },
                "vms-wait-for-agent": {
                    "cmd": "$SCRIPT_DIR/vms-wait-for-agent.sh"
                },
                "testcase-deploy": {
                    "cmd": "$SCRIPT_DIR/testcase-deploy.sh $TESTCASE install"
                },
                "testcase-init": {
                    "cmd": "$SCRIPT_DIR/testcase-run.sh $TESTCASE init.sh"
                },
                "testcase-run-nohup": {
                    "cmd": "$SCRIPT_DIR/testcase-run.sh $TESTCASE run.sh --nohup"
                },
                "wait": {
                    "cmd": "sleep $SLEEP_TIME"
                },
                "testcase-results": {
                    "cmd": "$SCRIPT_DIR/testcase-results.sh $TESTCASE"
                },
                "cleanup": {
                    "cmd": "echo $SCRIPT_DIR/vms-destroy.sh"
                }
            }
        },
        {
            "name": "cleanup",
            "scripts": {
                "cleanup": {
                    "cmd": "$SCRIPT_DIR/vms-destroy.sh"
                }
            }
        }
    ]
}